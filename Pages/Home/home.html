<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEI News | Notícias Ao Vivo do Brasil e do Mundo </title>
    <link rel="stylesheet" href="/Style/style.css">
    <link rel="icon" href="/Img/dei1.png" type="image/x-icon">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    </style>
</head>

<body>
    <header class="header">
        <div class="logo">
            <a href="/Pages/Home/home.html">
                <img src="/Img/dei1.png" class="logo" alt="DEI">
            </a>
        </div>
        <nav class="nav">
            <ul>
                <li><a href="/Pages/Politica/politica.html">Política</a></li>
                <li><a href="/Pages/Economia/economia.html">Economia</a></li>
                <li><a href="/Pages/Esportes/esportes.html">Esportes</a></li>
                <li><a href="/Pages/Entretenimento/entretenimento.html">Entretenimento</a></li>
                <li><a href="/Pages/Blogs/blog.html">Blogs e Colunas</a></li>
                <li><a href="/Pages/Login/login.html" class="login-button">Login</a></li> </ul>
            </ul>
        </nav>
    </header>

    <main class="main">
        <section class="destaque">
            <img src="/Img/IMG_1549.JPG" alt="Imagem de destaque">
            <div class="destaque-texto">
                <h2>Rio é claramente a capital energetica do Brasil, diz Claudio Castro ao CNN Talks</h2>
                <p>Vios da Ambipar. E possivel ser sustentável gerando estados</p>
            </div>
        </section>
        
        <section class="ultimas-noticias">
            <h2>Últimas Notícias</h2>
            <ul>
                <li>
                    <img src="/Img/IMG_0871.JPG" alt="Imagem da notícia 1">
                    <h3><a href="#">Homem, branco, de centro direita voja...</a></h3>
                    <p>Por preciominante dos profoltos cloltos um 2024...</p>
                </li>
                <li>
                    <img src="/Img/IMG_1512.JPG" alt="Imagem da notícia 2">
                    <h3><a href="#">Eleição apm Fortakos Fernandes vonico om...</a></h3>
                    <p>Anavitória de Nunes vom rachoada de...</p>
                </li>
                <li>
                    <img src="/Img/IMG_0908.jpg" alt="Imagem da notícia 3">
                    <h3><a href="#">Funcionária é demitida após...</a></h3>
                    <p>Identificar cliente como...</p>
                </li>
            </ul>
        </section>

        <section class="mais-lidas">
            <h2>Mais Lidas</h2>
            <ul>
                <ul id="itemsList"></ul>
            </ul>
        </section>    
        <script>
            
            const apiUrl = 'http://localhost:8080/api/items';
            async function updateItem() {
    const id = document.getElementById('updateItemId').value;
    const name = document.getElementById('updateItemName').value;
    try {
        const response = await fetch(`${apiUrl}/${id}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(name)
        });

        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }

        const result = await response.text();
        alert(result);

        getAllItems(); 

    } catch (error) {
        console.error('Error updating item:', error);
        alert('Error updating item. Please try again.'); 
    }}
    async function getItemById() {
  const itemId = document.getElementById('searchItemId').value; // Assuming you have an input with id 'searchItemId'

  try {
    const response = await fetch(`${apiUrl}/${itemId}`);
    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }

    const item = await response.json();

    // Now you have the item object, do something with it
    // For example, display it on the page:
    const itemDetailsDiv = document.getElementById('itemDetails'); // Assuming you have a div with id 'itemDetails'
    itemDetailsDiv.innerHTML = `
      <h3>${item.name}</h3>
      <p>ID: ${item.id}</p>
      {/* Add other details as needed */}
    `;

  } catch (error) {
    console.error('Error getting item:', error);
    // Handle the error, e.g., display an error message to the user
    alert('Error getting item. Please try again later.');
  }
}
    
            async function createItem() {
        const name = document.getElementById('createItemName').value;
        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(name) 
            });
    
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            const result = await response.text();
            alert(result);
            getAllItems(); 
    
        } catch (error) {
            console.error('Error creating item:', error);
            alert('Error creating item. Please try again later.'); 
        }
    }
    
            async function getAllItems() {
                const response = await fetch(apiUrl);
                const items = await response.json();
                const itemsList = document.getElementById('itemsList');
                itemsList.innerHTML = ''; 
                items.forEach(item => {
                    const li = document.createElement('li');  
    
                    li.textContent = `${item.name}`;
                    itemsList.appendChild(li);
                });
            }
    
            window.onload = getAllItems; 
    
            async function updateItem() {
        const id = document.getElementById('updateItemId').value;
        const name = document.getElementById('updateItemName').value;
        try {
            const response = await fetch(`${apiUrl}/${id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(name)
            });
    
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
    
            const result = await response.text();
            alert(result);
    
            getAllItems(); 
    
        } catch (error) {
            console.error('Error updating item:', error);
            alert('Error updating item. Please try again.'); 
        }
    }
            async function getUltimasNoticias() {
            const response = await fetch(`${apiUrl}/noticias`);
            const noticias = await response.json();
            const ultimasNoticiasList = document.querySelector('.ultimas-noticias ul');
            ultimasNoticiasList.innerHTML = '';
            noticias.forEach(noticia => {
                const li = document.createElement('li');
                const img = document.createElement('img');
                img.src = noticia.imagem; 
                img.alt = 'Imagem da notícia';
                const h3 = document.createElement('h3');
                h3.textContent = noticia.name;
                const p = document.createElement('p');
                p.textContent = noticia.resumo; 
                li.appendChild(img);
                li.appendChild(h3);
                li.appendChild(p);
                ultimasNoticiasList.appendChild(li);
            });
        }

        window.onload = () => {
            getAllItems();
            getUltimasNoticias();
        };
        setInterval(getAllItems, 5000);
        setInterval(getUltimasNoticias, 5000);

    
        </script>
</body>

</html>